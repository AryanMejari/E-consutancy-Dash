<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shabdaanjali - Policy Consultation Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #1a73e8;
            --primary-dark: #0d47a1;
            --secondary: #34a853;
            --danger: #ea4335;
            --warning: #fbbc04;
            --light: #f8f9fa;
            --dark: #202124;
            --gray: #5f6368;
            --light-gray: #dadce0;
            --sidebar-width: 250px;
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f7f9;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .app-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--dark);
            color: white;
            padding: 20px 0;
            transition: var(--transition);
            position: fixed;
            height: 100vh;
            z-index: 100;
        }
        
        .logo {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .logo h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 22px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo span {
            color: var(--primary);
        }
        
        .menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .menu-item:hover, .menu-item.active {
            background: rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--primary);
        }
        
        /* Main Content Styles */
        .main-content {
            flex: 1;
            padding: 20px;
            margin-left: var(--sidebar-width);
            transition: var(--transition);
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .header h2 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: var(--dark);
        }
        
        .consultation-info {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card {
            display: flex;
            flex-direction: column;
        }
        
        .stat-card .value {
            font-size: 28px;
            font-weight: 700;
            margin: 10px 0;
        }
        
        .stat-card .label {
            color: var(--gray);
            font-size: 14px;
        }
        
        .stat-card .trend {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            margin-top: 5px;
        }
        
        .trend.up {
            color: var(--secondary);
        }
        
        .trend.down {
            color: var(--danger);
        }
        
        /* Charts */
        .chart-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-title {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 18px;
        }
        
        .chart-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: var(--transition);
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid var(--light-gray);
            color: var(--gray);
        }
        
        .btn-outline:hover {
            background: var(--light);
        }
        
        /* Comment List */
        .comments-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .filter-label {
            font-size: 12px;
            color: var(--gray);
        }
        
        select, input {
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid var(--light-gray);
            background: white;
        }
        
        .comment {
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background: var(--light);
            transition: var(--transition);
        }
        
        .comment:hover {
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .comment-source {
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .key-stakeholder {
            background: var(--primary);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 10px;
        }
        
        .comment-sentiment {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .sentiment-negative {
            background: #ffebee;
            color: var(--danger);
        }
        
        .sentiment-positive {
            background: #e6f4ea;
            color: var(--secondary);
        }
        
        .sentiment-neutral {
            background: #fef7e0;
            color: var(--warning);
        }
        
        .comment-clause {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 10px;
        }
        
        .comment-text {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .comment-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }
        
        .comment-type {
            display: flex;
            gap: 10px;
        }
        
        .type-badge {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .type-actionable {
            background: #e6f4ea;
            color: var(--secondary);
        }
        
        .type-complaint {
            background: #ffebee;
            color: var(--danger);
        }
        
        .campaign-badge {
            background: #e8f0fe;
            color: var(--primary);
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .comment-actions {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            background: transparent;
            border: none;
            cursor: pointer;
            color: var(--gray);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 3px;
            transition: var(--transition);
        }
        
        .action-btn:hover {
            color: var(--primary);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray);
        }
        
        /* Analysis tags */
        .analysis-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }
        
        .analysis-tag {
            padding: 5px 10px;
            background: #e8f0fe;
            border-radius: 20px;
            font-size: 12px;
            color: var(--primary);
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .dashboard-cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                width: 70px;
                transform: translateX(-70px);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .logo h1 span, .menu-item span {
                display: none;
            }
            
            .menu-item {
                justify-content: center;
            }
            
            .menu-toggle {
                display: block;
            }
        }
        
        .menu-toggle {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 101;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
        }
        
        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 8px;
        }
        
        .page-btn {
            padding: 8px 12px;
            background: white;
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            cursor: pointer;
        }
        
        .page-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
    </style>
</head>
<body>
    <button class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </button>
    
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="logo">
                <h1><i class="fas fa-brain"></i> <span>Shabdaanjali</span></h1>
            </div>
            <div class="menu-item active">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </div>
            <div class="menu-item">
                <i class="fas fa-comments"></i>
                <span>Consultations</span>
            </div>
            <div class="menu-item">
                <i class="fas fa-chart-bar"></i>
                <span>Analytics</span>
            </div>
            <div class="menu-item">
                <i class="fas fa-users"></i>
                <span>Stakeholders</span>
            </div>
            <div class="menu-item">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </div>
            <div class="menu-item">
                <i class="fas fa-question-circle"></i>
                <span>Help & Support</span>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h2>E-Consultation Analysis Dashboard</h2>
                <div class="user-info">
                    <img src="https://ui-avatars.com/api/?name=MoCA+Officer&background=0D8ABC&color=fff" alt="User" style="width: 40px; height: 40px; border-radius: 50%;">
                </div>
            </div>
            
            <div class="consultation-info">
                <h3>Companies (Amendment) Bill, 2023</h3>
                <p>Analysis of 2,347 public comments received between Jan 15 - Feb 28, 2023</p>
            </div>
            
            <div class="dashboard-cards">
                <div class="card stat-card">
                    <div class="label">TOTAL COMMENTS</div>
                    <div class="value">2,347</div>
                    <div class="trend up">
                        <i class="fas fa-arrow-up"></i>
                        <span>12% from previous consultation</span>
                    </div>
                </div>
                
                <div class="card stat-card">
                    <div class="label">KEY STAKEHOLDERS</div>
                    <div class="value">38</div>
                    <div class="trend up">
                        <i class="fas fa-arrow-up"></i>
                        <span>8% more engaged</span>
                    </div>
                </div>
                
                <div class="card stat-card">
                    <div class="label">ACTIONABLE SUGGESTIONS</div>
                    <div class="value">217</div>
                    <div class="trend up">
                        <i class="fas fa-arrow-up"></i>
                        <span>24% higher quality</span>
                    </div>
                </div>
                
                <div class="card stat-card">
                    <div class="label">COORDINATED CAMPAIGNS</div>
                    <div class="value">14</div>
                    <div class="trend down">
                        <i class="fas fa-arrow-down"></i>
                        <span>3% less than last time</span>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <div class="chart-header">
                    <div class="chart-title">Sentiment Analysis by Clause</div>
                    <div class="chart-actions">
                        <button class="btn btn-outline" id="exportBtn">
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="btn btn-primary" id="filterStakeholdersBtn">
                            <i class="fas fa-filter"></i> Filter Key Stakeholders
                        </button>
                    </div>
                </div>
                <div style="height: 300px; position: relative;">
                    <canvas id="sentimentChart"></canvas>
                </div>
            </div>
            
            <div class="comments-section">
                <div class="chart-header">
                    <div class="chart-title">Comment Analysis</div>
                    <div class="chart-actions">
                        <button class="btn btn-primary" id="showActionableBtn">
                            <i class="fas fa-lightbulb"></i> Show Actionable Suggestions
                        </button>
                    </div>
                </div>
                
                <div class="filters">
                    <div class="filter-group">
                        <div class="filter-label">SENTIMENT</div>
                        <select id="sentimentFilter">
                            <option value="all">All Sentiments</option>
                            <option value="positive">Positive</option>
                            <option value="negative">Negative</option>
                            <option value="neutral">Neutral</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <div class="filter-label">STAKEHOLDER TYPE</div>
                        <select id="stakeholderFilter">
                            <option value="all">All Stakeholders</option>
                            <option value="key">Key Stakeholders</option>
                            <option value="industry">Industry Bodies</option>
                            <option value="individual">Individual Citizens</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <div class="filter-label">CLAUSE</div>
                        <select id="clauseFilter">
                            <option value="all">All Clauses</option>
                            <option value="clause7">Clause 7 - CSR Provisions</option>
                            <option value="rule12">Rule 12 - Audit Requirements</option>
                            <option value="section4">Section 4(1)(a) - Reporting Timeline</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <div class="filter-label">COMMENT TYPE</div>
                        <select id="typeFilter">
                            <option value="all">All Types</option>
                            <option value="actionable">Actionable Suggestions</option>
                            <option value="complaint">Complaints</option>
                            <option value="query">Queries</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <div class="filter-label">SEARCH</div>
                        <input type="text" id="searchInput" placeholder="Search comments...">
                    </div>
                </div>
                
                <div class="comments-list" id="commentsList">
                    <!-- Comments will be dynamically inserted here -->
                </div>
                
                <div class="pagination" id="pagination">
                    <!-- Pagination will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal for comment analysis -->
    <div class="modal" id="analysisModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Comment Analysis</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div id="modalContent">
                <!-- Modal content will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Sample data for the application
        const sampleComments = [
            {
                id: 1,
                source: "Institute of Chartered Accountants of India (ICAI)",
                isKeyStakeholder: true,
                sentiment: "negative",
                clause: "Clause 7: Corporate Social Responsibility (CSR) Reporting Requirements",
                text: "While the intention to enhance transparency in CSR spending is commendable, the proposed amendment may create unintended compliance burdens for smaller companies. We urge reconsideration of the mandatory disclosure requirements for companies with less than ₹50 crore net profit.",
                type: "actionable",
                campaign: false,
                date: "2023-02-15",
                analysis: {
                    sentimentScore: -0.8,
                    keyPhrases: ["compliance burdens", "smaller companies", "mandatory disclosure requirements"],
                    suggestedAction: "Consider threshold-based application of disclosure requirements",
                    impact: "High",
                    relevance: "Very Relevant"
                }
            },
            {
                id: 2,
                source: "Federation of Indian Chambers of Commerce & Industry (FICCI)",
                isKeyStakeholder: true,
                sentiment: "negative",
                clause: "Rule 12: Enhanced Audit Requirements",
                text: "The proposed audit requirements would significantly increase compliance costs without corresponding benefits to stakeholders. We recommend a phased implementation approach and raising the threshold for application to companies with turnover below ₹500 crore.",
                type: "actionable",
                campaign: true,
                similarCount: 127,
                date: "2023-02-18",
                analysis: {
                    sentimentScore: -0.7,
                    keyPhrases: ["compliance costs", "phased implementation", "threshold for application"],
                    suggestedAction: "Consider phased implementation and review applicability thresholds",
                    impact: "High",
                    relevance: "Very Relevant"
                }
            },
            {
                id: 3,
                source: "Rajesh Kumar",
                isKeyStakeholder: false,
                sentiment: "positive",
                clause: "General: Overall Legislation",
                text: "This is a great step towards corporate transparency. I fully support the government's initiative to make companies more accountable to stakeholders and the public.",
                type: "praise",
                campaign: false,
                date: "2023-01-20",
                analysis: {
                    sentimentScore: 0.9,
                    keyPhrases: ["corporate transparency", "accountable to stakeholders"],
                    suggestedAction: "None - general support comment",
                    impact: "Low",
                    relevance: "General"
                }
            },
            {
                id: 4,
                source: "Small Business Association",
                isKeyStakeholder: false,
                sentiment: "negative",
                clause: "Section 4(1)(a): Reporting Timeline",
                text: "The 30-day reporting requirement is impractical for small businesses with limited resources. We recommend extending the timeline to 60 days to allow for proper compilation and verification of required information.",
                type: "actionable",
                campaign: true,
                similarCount: 84,
                date: "2023-02-10",
                analysis: {
                    sentimentScore: -0.6,
                    keyPhrases: ["impractical for small businesses", "extending the timeline", "proper compilation"],
                    suggestedAction: "Consider extended timeline for small businesses",
                    impact: "Medium",
                    relevance: "Relevant"
                }
            },
            {
                id: 5,
                source: "Environmental Action Group",
                isKeyStakeholder: true,
                sentiment: "positive",
                clause: "Clause 7: Corporate Social Responsibility (CSR) Reporting Requirements",
                text: "We applaud the enhanced CSR reporting requirements. This will ensure companies are more accountable for their social and environmental commitments. However, we suggest including specific metrics for environmental impact assessment.",
                type: "actionable",
                campaign: false,
                date: "2023-02-22",
                analysis: {
                    sentimentScore: 0.7,
                    keyPhrases: ["enhanced CSR reporting", "environmental impact assessment", "specific metrics"],
                    suggestedAction: "Include environmental impact assessment metrics in reporting requirements",
                    impact: "Medium",
                    relevance: "Relevant"
                }
            },
            {
                id: 6,
                source: "National Corporate Lawyers Association",
                isKeyStakeholder: true,
                sentiment: "neutral",
                clause: "Rule 12: Enhanced Audit Requirements",
                text: "The proposed audit requirements align with international standards but may require additional clarification on the scope of auditor liabilities. We suggest publishing detailed guidelines for implementation.",
                type: "query",
                campaign: false,
                date: "2023-02-05",
                analysis: {
                    sentimentScore: 0.1,
                    keyPhrases: ["international standards", "auditor liabilities", "detailed guidelines"],
                    suggestedAction: "Provide clarification on auditor liabilities and publish implementation guidelines",
                    impact: "Medium",
                    relevance: "Relevant"
                }
            }
        ];

        // Chart data
        const chartData = {
            labels: ['Clause 7 - CSR', 'Rule 12 - Audit', 'Section 4 - Reporting', 'Clause 9 - Compliance', 'Section 12 - Penalties'],
            datasets: [
                {
                    label: 'Positive',
                    data: [65, 30, 45, 25, 20],
                    backgroundColor: '#34a853',
                },
                {
                    label: 'Neutral',
                    data: [20, 35, 25, 30, 25],
                    backgroundColor: '#fbbc04',
                },
                {
                    label: 'Negative',
                    data: [15, 35, 30, 45, 55],
                    backgroundColor: '#ea4335',
                }
            ]
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize chart
            const ctx = document.getElementById('sentimentChart').getContext('2d');
            const sentimentChart = new Chart(ctx, {
                type: 'bar',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            stacked: true,
                        },
                        y: {
                            stacked: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw + '%';
                                }
                            }
                        }
                    }
                }
            });
            
            // Render comments
            renderComments(sampleComments);
            
            // Setup event listeners
            document.getElementById('exportBtn').addEventListener('click', function() {
                alert('Data exported successfully!');
            });
            
            document.getElementById('filterStakeholdersBtn').addEventListener('click', function() {
                const filteredComments = sampleComments.filter(comment => comment.isKeyStakeholder);
                renderComments(filteredComments);
                this.classList.toggle('active');
                
                if (!this.classList.contains('active')) {
                    renderComments(sampleComments);
                }
            });
            
            document.getElementById('showActionableBtn').addEventListener('click', function() {
                const filteredComments = sampleComments.filter(comment => comment.type === 'actionable');
                renderComments(filteredComments);
                alert('Showing ' + filteredComments.length + ' actionable suggestions');
            });
            
            // Filter event listeners
            document.getElementById('sentimentFilter').addEventListener('change', applyFilters);
            document.getElementById('stakeholderFilter').addEventListener('change', applyFilters);
            document.getElementById('clauseFilter').addEventListener('change', applyFilters);
            document.getElementById('typeFilter').addEventListener('change', applyFilters);
            document.getElementById('searchInput').addEventListener('input', applyFilters);
            
            // Modal functionality
            document.getElementById('closeModal').addEventListener('click', function() {
                document.getElementById('analysisModal').style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === document.getElementById('analysisModal')) {
                    document.getElementById('analysisModal').style.display = 'none';
                }
            });
            
            // Mobile menu toggle
            document.getElementById('menuToggle').addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('active');
            });
        });
        
        // Function to render comments
        function renderComments(comments) {
            const commentsList = document.getElementById('commentsList');
            commentsList.innerHTML = '';
            
            if (comments.length === 0) {
                commentsList.innerHTML = '<p class="no-results">No comments match your filters.</p>';
                document.getElementById('pagination').innerHTML = '';
                return;
            }
            
            comments.forEach(comment => {
                const commentEl = document.createElement('div');
                commentEl.className = 'comment';
                
                // Determine sentiment class
                let sentimentClass = '';
                if (comment.sentiment === 'positive') sentimentClass = 'sentiment-positive';
                if (comment.sentiment === 'negative') sentimentClass = 'sentiment-negative';
                if (comment.sentiment === 'neutral') sentimentClass = 'sentiment-neutral';
                
                // Determine type class
                let typeClass = '';
                let typeText = '';
                if (comment.type === 'actionable') {
                    typeClass = 'type-actionable';
                    typeText = 'Actionable Suggestion';
                } else if (comment.type === 'complaint') {
                    typeClass = 'type-complaint';
                    typeText = 'Complaint';
                } else if (comment.type === 'praise') {
                    typeClass = 'type-complaint';
                    typeText = 'Praise';
                } else {
                    typeClass = 'type-actionable';
                    typeText = 'Query';
                }
                
                commentEl.innerHTML = `
                    <div class="comment-header">
                        <div class="comment-source">
                            <i class="${comment.source.includes('Individual') ? 'fas fa-user' : 'fas fa-building'}"></i>
                            ${comment.source}
                            ${comment.isKeyStakeholder ? '<span class="key-stakeholder">Key Stakeholder</span>' : ''}
                        </div>
                        <div class="comment-sentiment ${sentimentClass}">${comment.sentiment.charAt(0).toUpperCase() + comment.sentiment.slice(1)}</div>
                    </div>
                    <div class="comment-clause">
                        <strong>${comment.clause.split(':')[0]}:</strong> ${comment.clause.split(':')[1]}
                    </div>
                    <div class="comment-text">
                        "${comment.text}"
                    </div>
                    <div class="comment-footer">
                        <div class="comment-type">
                            <span class="type-badge ${typeClass}">${typeText}</span>
                            ${comment.campaign ? `<span class="campaign-badge" data-id="${comment.id}">Coordinated Campaign (${comment.similarCount} similar)</span>` : ''}
                        </div>
                        <div class="comment-actions">
                            <button class="action-btn view-analysis" data-id="${comment.id}">
                                <i class="far fa-eye"></i> View Analysis
                            </button>
                            <button class="action-btn">
                                <i class="far fa-flag"></i> Flag
                            </button>
                        </div>
                    </div>
                `;
                
                commentsList.appendChild(commentEl);
            });
            
            // Add event listeners to view analysis buttons
            document.querySelectorAll('.view-analysis').forEach(button => {
                button.addEventListener('click', function() {
                    const commentId = this.getAttribute('data-id');
                    showAnalysisModal(commentId);
                });
            });
            
            // Add event listeners to campaign badges
            document.querySelectorAll('.campaign-badge').forEach(badge => {
                badge.addEventListener('click', function() {
                    const commentId = this.getAttribute('data-id');
                    alert(`Showing cluster analysis for comment ${commentId} and ${sampleComments.find(c => c.id == commentId).similarCount} similar comments`);
                });
            });
            
            // Simple pagination (for demo purposes)
            updatePagination();
        }
        
        // Function to apply filters
        function applyFilters() {
            const sentimentFilter = document.getElementById('sentimentFilter').value;
            const stakeholderFilter = document.getElementById('stakeholderFilter').value;
            const clauseFilter = document.getElementById('clauseFilter').value;
            const typeFilter = document.getElementById('typeFilter').value;
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            
            let filteredComments = sampleComments.filter(comment => {
                // Sentiment filter
                if (sentimentFilter !== 'all' && comment.sentiment !== sentimentFilter) {
                    return false;
                }
                
                // Stakeholder filter
                if (stakeholderFilter !== 'all') {
                    if (stakeholderFilter === 'key' && !comment.isKeyStakeholder) {
                        return false;
                    }
                    if (stakeholderFilter === 'industry' && !comment.source.includes('Association') && !comment.source.includes('Federation') && !comment.source.includes('Institute')) {
                        return false;
                    }
                    if (stakeholderFilter === 'individual' && !comment.source.includes('Individual')) {
                        return false;
                    }
                }
                
                // Clause filter
                if (clauseFilter !== 'all') {
                    if (clauseFilter === 'clause7' && !comment.clause.includes('Clause 7')) {
                        return false;
                    }
                    if (clauseFilter === 'rule12' && !comment.clause.includes('Rule 12')) {
                        return false;
                    }
                    if (clauseFilter === 'section4' && !comment.clause.includes('Section 4')) {
                        return false;
                    }
                }
                
                // Type filter
                if (typeFilter !== 'all' && comment.type !== typeFilter) {
                    return false;
                }
                
                // Search filter
                if (searchText && !comment.text.toLowerCase().includes(searchText) && 
                    !comment.source.toLowerCase().includes(searchText) && 
                    !comment.clause.toLowerCase().includes(searchText)) {
                    return false;
                }
                
                return true;
            });
            
            renderComments(filteredComments);
        }
        
        // Function to show analysis modal
        function showAnalysisModal(commentId) {
            const comment = sampleComments.find(c => c.id == commentId);
            if (!comment) return;
            
            const modal = document.getElementById('analysisModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            
            modalTitle.textContent = `Analysis: ${comment.source}`;
            
            // Determine sentiment icon and color
            let sentimentIcon = '';
            let sentimentColor = '';
            if (comment.sentiment === 'positive') {
                sentimentIcon = 'fa-smile';
                sentimentColor = 'color: #34a853;';
            } else if (comment.sentiment === 'negative') {
                sentimentIcon = 'fa-frown';
                sentimentColor = 'color: #ea4335;';
            } else {
                sentimentIcon = 'fa-meh';
                sentimentColor = 'color: #fbbc04;';
            }
            
            modalContent.innerHTML = `
                <div class="comment-clause">
                    <strong>${comment.clause}</strong>
                </div>
                <div class="comment-text">
                    "${comment.text}"
                </div>
                
                <h4>AI Analysis</h4>
                <div style="display: flex; align-items: center; margin: 15px 0;">
                    <div style="font-size: 24px; ${sentimentColor} margin-right: 10px;">
                        <i class="far ${sentimentIcon}"></i>
                    </div>
                    <div>
                                                <strong>Sentiment Score:</strong> ${comment.analysis.sentimentScore.toFixed(2)}
                    </div>
                </div>
                
                <div class="analysis-tags">
                    ${comment.analysis.keyPhrases.map(phrase => 
                        `<span class="analysis-tag">${phrase}</span>`
                    ).join('')}
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                    <div>
                        <strong>Suggested Action:</strong>
                        <p>${comment.analysis.suggestedAction}</p>
                    </div>
                    <div>
                        <strong>Impact Level:</strong>
                        <p>${comment.analysis.impact}</p>
                    </div>
                    <div>
                        <strong>Relevance:</strong>
                        <p>${comment.analysis.relevance}</p>
                    </div>
                    <div>
                        <strong>Submission Date:</strong>
                        <p>${comment.date}</p>
                    </div>
                </div>
                
                ${comment.campaign ? `
                <div style="background: #f5f5f5; padding: 10px; border-radius: 4px; margin: 15px 0;">
                    <strong><i class="fas fa-users"></i> Coordinated Campaign Detected</strong>
                    <p>This comment is part of a coordinated campaign with ${comment.similarCount} similar submissions.</p>
                    <button class="btn btn-outline" style="margin-top: 8px;">
                        <i class="fas fa-chart-network"></i> View Campaign Analysis
                    </button>
                </div>
                ` : ''}
                
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary">
                        <i class="fas fa-check-circle"></i> Mark as Reviewed
                    </button>
                    <button class="btn btn-outline">
                        <i class="fas fa-share"></i> Share with Team
                    </button>
                </div>
            `;
            
            modal.style.display = 'flex';
        }
        
        // Function to update pagination
        function updatePagination() {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';
            
            // Simple pagination for demo
            for (let i = 1; i <= 5; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = i === 1 ? 'page-btn active' : 'page-btn';
                pageBtn.textContent = i;
                pageBtn.addEventListener('click', function() {
                    document.querySelectorAll('.page-btn').forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                });
                pagination.appendChild(pageBtn);
            }
        }
    </script>
</body>
</html>